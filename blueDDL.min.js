String.prototype.format=function(){var c=this;for(var a=0;a<arguments.length;a++){var b=new RegExp("\\{"+a+"\\}","gi");c=c.replace(b,arguments[a])}return c};var blueDDLClass=(function(){a.prototype.generateDropdown=function(b){return'<div id="'+b+'" class="myDropDown">		<div class="myDropDownBox" >			<div class="myDropDownBoxName" style="{1}">Selecionar</div>			<div class="myDropDownBoxIco"></div>			<div style="clear:both;"></div>		</div>			<div style="clear:both;"></div>			<div class="myDropDownItemContainer" style="display:none;{2}">         {0}  		</div>	</div>'};a.montaData=function(b){var c={type:"blueDDL",isCheckBox:b};c=JSON.stringify(c);c=c.replace(/\"/g,"'");return c};a.getData=function(c){var b=c.replace(/\'/g,'"');return $.parseJSON(b)};a.prototype.generatedList=function(d){var b="";var c="";if(a.checkBox){c='<div class="myDropDownCheckbox myDropDownUnchecked" > </div>'}$(d).each(function(e,f){b=b+'<div class="myDropDownItem" id="{0}" >{1} {2}</div>'.format($(f).attr("id"),$(f).text(),c)});return b};a.bindEventsDDL=function(){return"<div id=\"scriptBlueDDL\"><script type=\"text/javascript\">             $(function(){                 $('.myDropDown').each(function(i,o){                 	$('.myDropDownBox',o).unbind('click').click(blueDDLClass.myDropDownControler);                 	$('.myDropDownItem', o).click(blueDDLClass.myDropDownItemControler);               });             })             <\/script></div>"};a.myDropDownControler=function(){$(".myDropDownItemContainer",$(this).closest(".myDropDown")).slideToggle("fast");event.cancelBubble=true;if(event.stopPropagation){event.stopPropagation()}};a.mudaEstadoCheckBox=function(b){if($(".myDropDownCheckbox",b).hasClass("myDropDownChecked")){$(".myDropDownCheckbox",b).removeClass("myDropDownChecked");$(".myDropDownCheckbox",b).addClass("myDropDownUnchecked")}else{$(".myDropDownCheckbox",b).removeClass("myDropDownUnchecked");$(".myDropDownCheckbox",b).addClass("myDropDownChecked")}};a.myDropDownItemControler=function(c){if(c instanceof jQuery.Event){c=this}$(".myDropDownBoxName",$(c).closest(".myDropDown")).text($(c).text());var b=a.getData($(c).closest(".myDropDown").attr("data")).isCheckBox;if(b){a.mudaEstadoCheckBox(c)}else{$(".selected",".myDropDownItemContainer",$(c).closest(".myDropDown")).removeClass("selected");$(c).addClass("selected");$(".myDropDownItemContainer",$(c).closest(".myDropDown")).slideToggle("fast")}event.cancelBubble=true;if(event.stopPropagation){event.stopPropagation()}return false};a.adicionarNovoItem=function(f,h,e){var c=a.getData($(".myDropDown",f).attr("data")).isCheckBox;var g=$(".myDropDownItemContainer",f);var b="";if(!c){b='<div class="myDropDownItem" onclick="blueDDLClass.myDropDownItemControler(this)" id="{0}" >{1}</div>'.format(h,e)}else{var d='<div class="myDropDownCheckbox myDropDownUnchecked" > </div>';b='<div class="myDropDownItem" onclick="blueDDLClass.myDropDownItemControler(this)" id="{0}" >{1} {2}</div>'.format(h,e,d)}$(g).append(b)};a.selecionado=function(d){var b=a.getData($(".myDropDown",d).attr("data")).isCheckBox;if($(".selected",d).length==0&&!b){return null}if(!b){return $(".selected",d).attr("id")}else{var c=[];$(".myDropDownChecked",d).closest(".myDropDownItem").each(function(){c.push($(this).attr("id"))});return c}};a.setSelecionado=function(e,f){var b=a.getData($(".myDropDown",e).attr("data")).isCheckBox;if(!(f instanceof Array)){$(".selected",e).removeClass("selected");var d=$('div[id="{0}"]'.format(f),$(".myDropDownItemContainer",e));d.addClass("selected");$(".myDropDownBoxName",$(d).closest(".myDropDown")).text($(d).text());if(b){a.mudaEstadoCheckBox(d)}}else{var c=f;$(c).each(function(){var g=$('div[id="{0}"]'.format(this),$(".myDropDownItemContainer",e));g.addClass("selected");a.mudaEstadoCheckBox(g)})}};a.bindClickEvent=function(c,b){if(typeof(b)!="undefined"){$(".myDropDownItem",c).unbind("click").bind("click",b)}};function a(d,f,h,j){if($(".myDropDown",f).length!=0){return}var c=$(f).attr("id");var i=$(f).width();var k=this.generateDropdown(c);var b=$(".listItem",f);var e="";var g=i-17-3;g="width:"+g+"px";i="width:"+i+"px;height:"+j+"px;";a.checkBox=h;$(".listItem",f).hide();if(b.length<=0){e=k.format("",g,i)}else{e=k.format(this.generatedList(b),g,i)}$(f).append(e);$(".myDropDown",f).attr("data",a.montaData(h));a.bindClickEvent(f,d)}return a})();$("html").click(function(){$(".myDropDownItemContainer").slideUp("fast")});$.extend($.fn,{blueDDL:function(b,a,c){if(typeof(a)!="undefined"){new blueDDLClass(b,this,a,c)}else{new blueDDLClass(b,this,false,c)}if($("#scriptBlueDDL").length==0){$("body").append(blueDDLClass.bindEventsDDL)}},blueDDL_Selected:function(){return blueDDLClass.selecionado(this)},blueDDL_OnClick:function(a){blueDDLClass.bindClickEvent(this,a)},blueDDL_SetSelected:function(a){blueDDLClass.setSelecionado(this,a)},blueDDL_NewItem:function(b,a){return blueDDLClass.adicionarNovoItem(this,b,a)},});